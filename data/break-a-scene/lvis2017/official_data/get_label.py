import json

input_file = 'train_filename.jsonl'
old_file = 'output.jsonl'
all_label = []
all_old_lb = []
label_map = {}
# with open(input_file, "r") as f:
#     for line in f:
#         data = json.loads(line.strip())

#         # Update image_id to be unique
#         if "query_file" in data and "category" in data["query_file"]:
#             label = data["query_file"]["category"]
#             if label not in all_label:
#                 all_label.append(label)

with open(old_file, "r") as f:
    for line in f:
        data = json.loads(line.strip())

        # Update image_id to be unique
        if "query_file" in data and "category" in data["query_file"]:
            label = data["query_file"]["category"]
            lbl_id = str(data["query_file"]["label"])
            if lbl_id not in label_map:
                label_map[lbl_id] = label
            # if label not in all_old_lb:
            #     all_old_lb.append(label)
import pdb; pdb.set_trace() # AttributionGD/data/break-a-scene/lvis2017/official_data
with open('label_map.json', "w") as json_file:
    json.dump(label_map, json_file, indent=4)
print(len(all_label))
new_label = []
# for label in all_old_lb:
#     if label not in all_label:
#         new_label.append(label)
print(all_old_lb)
# train
# ['monitor_(computer_equipment) computer_monitor', 'computer_keyboard', 'earphone', 'broccoli', 'tablecloth', 'pizza', 'ham', 'pickup_truck', 'car_(automobile)', 'person', 'ski', 'bear', 'skateboard', 'short_pants', 'bowl', 'toilet', 'cistern', 'wrench', 'surfboard', 'wet_suit', 'boat', 'flowerpot', 'vase', 'elephant', 'trousers', 'blanket', 'fireplug', 'jean', 'baseball_glove', 'ball', 'pipe', 'motorcycle', 'fighter_jet', 'flag', 'taillight', 'stop_sign', 'bucket', 'deer', 'signboard', 'ski_boot', 'hat', 'clock_tower', 'dog', 'frisbee', 'crossbar', 'can', 'napkin', 'pickle', 'banner', 'mirror', 'toothbrush', 'ring', 'tennis_racket', 'headband', 'bench', 'jersey', 'zebra', 'bathtub', 'sink', 'train_(railroad_vehicle)', 'ski_pole', 'goggles', 'backpack', 'shoe', 'bed', 'curtain', 'book', 'pastry', 'tarp', 'pole', 'pitcher_(vessel_for_liquid)', 'mug', 'crate', 'dog_collar', 'earring', 'dress_suit', 'dress', 'necktie', 'box', 'sweatshirt', 'bandanna', 'laptop_computer', 'airplane', 'shirt', 'tennis_ball', 'desk', 'parking_meter', 'license_plate', 'timer', 'handbag', 'bottle', 'suitcase', 'banana', 'mouse_(computer_equipment)', 'teddy_bear', 'rabbit', 'bow-tie', 'toilet_tissue', 'handle', 'ostrich', 'log', 'skirt', 'flower_arrangement', 'horse', 'truck', 'table', 'kite', 'baseball_cap', 'candle', 'drawer', 'sweater', 'trash_can', 'knee_pad', 'quilt', 'Christmas_tree', 'hose', 'bus_(vehicle)', 'poster', 'chair', 'lampshade', 'wine_bottle', 'bird', 'orange_(fruit)', 'plate', 'mashed_potato', 'wheel', 'thermometer', 'camera', 'cat', 'beanie', 'microwave_oven', 'refrigerator', 'fan', 'toy', 'telephone', 'steering_wheel', 'stool', 'mound_(baseball)', 'baby_buggy', 'grill', 'cow', 'fire_engine', 'windshield_wiper', 'blinder_(for_horses)', 'lamppost', 'statue_(sculpture)', 'strap', 'blouse', 'apron', 'cone', 'polo_shirt', 'bath_mat', 'dispenser', 'towel_rack', 'pear', 'apple', 'glass_(drink_container)', 'zucchini', 'jacket', 'glove', 'coat', 'snowboard', 'speaker_(stero_equipment)', 'control', 'cellular_telephone', 'prawn', 'steak_(food)', 'buoy', 'propeller', 'bicycle', 'painting', 'sofa', 'coffee_table', 'vending_machine', 'bracelet', 'wristlet', 'doughnut', 'telephone_pole', 'bun', 'tray', 'condiment', 'railcar_(part_of_a_train)', 'newspaper', 'cover', 'whipped_cream', 'teapot', 'crumb', 'tank_top_(clothing)', 'umbrella', 'trunk', 'scarf', 'giraffe', 'stove', 'sandal_(type_of_shoe)', 'potato', 'saddle_blanket', 'saddle_(on_an_animal)', 'place_mat', 'broom', 'school_bus', 'carrot', 'chopping_board', 'balloon', 'cake', 'choker', 'bridal_gown', 'headlight', 'streetlight', 'basket', 'tote_bag', 'visor', 'windsock', 'towel', 'orange_juice', 'egg', 'sausage', 'toast_(food)', 'wineglass', 'pot', 'faucet', 'water_bottle', 'paper_plate', 'cab_(taxi)', 'rearview_mirror', 'spoon', 'fork', 'wok', 'cup', 'measuring_cup', 'knife', 'tissue_paper', 'pillow', 'bolt', 'basketball', 'tag', 'hog', 'domestic_ass', 'motor', 'cushion', 'cauliflower', 'spectacles', 'duck', 'antenna', 'air_conditioner', 'belt', 'street_sign', 'magazine', 'key', 'puppy', 'pottery', 'bath_towel', 'barrel', 'baseball_bat', 'tomato', 'remote_control', 'shower_curtain', 'helmet', 'sheep', 'tiger', 'tapestry', 'television_set', 'fireplace', 'lantern', 'trailer_truck', 'clock', 'pan_(for_cooking)', 'padlock', 'lamp', 'minivan', 'armchair', 'scoreboard', 'thread', 'sunglasses', 'doormat', 'plastic_bag', 'rocking_chair', 'baseball', 'curling_iron', 'gasmask', 'ladder', 'shoulder_bag', 'freight_car', 'blender', 'lettuce', 'soccer_ball', 'bread', 'jet_plane', 'bobbin', 'beef_(food)', 'paper_towel', 'coaster', 'doll', 'almond', 'projector', 'mushroom', 'parasail_(sports)', 'vent', 'boot', 'raft', 'sock', 'tinsel', 'watch', 'sandwich', 'gazelle', 'swimsuit', 'lime', 'watermelon', 'reflector', 'handcart', 'deck_chair', 'lanyard', 'candy_cane', 'racket', 'dishwasher', 'oven', 'belt_buckle', 'latch', 'mast', 'awning', 'thermos_bottle', 'phonograph_record', 'cupcake', 'wolf', 'chandelier', 'magnet', 'pumpkin', 'sword', 'cocoa_(beverage)', 'ski_parka', 'bullet_train', 'brake_light', 'bottle_cap', 'vest', 'football_(American)', 'bandage', 'bowler_hat', 'notebook', 'hotplate', 'cooler_(for_food)', 'tights_(clothing)', 'necklace', 'cowboy_hat', 'polar_bear', 'ashtray', 'lemon', 'pajamas', 'toaster', 'cub_(animal)', 'billboard', 'wall_socket', 'dresser', 'flip-flop_(sandal)', 'peach', 'blinker', 'birthday_cake', 'stepladder', 'duffel_bag', 'jar', 'goose', 'shopping_cart', 'pepper', 'wristband', 'water_cooler', 'armband', 'headboard', 'marker', 'folding_chair', 'tractor_(farm_equipment)', 'weathervane', 'bedspread', 'cappuccino', 'gravestone', 'money', 'omelet', 'kitten', 'button', 'mousepad', 'strawberry', 'pony', 'suit_(clothing)', 'flute_glass', 'mattress', 'onion', 'bathrobe', 'scarecrow', 'shampoo', 'life_jacket', 'giant_panda', 'gull', 'printer', 'wagon', 'dumpster', 'ottoman', 'cupboard', 'wig', 'foal', 'crib', 'asparagus', 'pie', 'table_lamp', 'globe', 'walking_cane', 'grizzly', 'tinfoil', 'tripod', 'highchair', 'pacifier', 'mask', 'bow_(decorative_ribbons)', 'kitchen_sink', 'salmon_(food)', 'hairbrush', 'radiator', 'alcohol', 'wall_clock', 'traffic_light', 'milk', 'motor_scooter', 'ram_(animal)', 'fire_hose', 'owl', 'dining_table', 'calendar', 'doorknob', 'mitten', 'strainer', 'mat_(gym_equipment)', 'manhole', 'sail', 'clip', 'olive_oil', 'avocado', 'cornice', 'carton', 'knob', 'cherry', 'barrette', 'envelope', 'nut']
# unseen
# ['manger', 'saucepan', 'beer_bottle', 'stapler_(stapling_machine)', 'pancake', 'blackberry', 'rat', 'cornet', 'saucer', 'tongs', 'slide', 'camera_lens', 'soup', 'shopping_bag', 'loveseat', 'slipper_(footwear)', 'pad', 'recliner', 'lightbulb', 'coat_hanger', 'cookie', 'medicine', 'shovel', 'hinge', 'bulldozer', 'cucumber', 'mixer_(kitchen_tool)', 'cigarette', 'baseball_base', 'celery', 'plow_(farm_equipment)', 'beanbag', 'Lego', 'waffle_iron', 'chopstick', 'flagpole', 'spatula', 'ambulance']

####### valid
# ['bench', 'scarf', 'choker', 'cigarette', 'boat', 'polo_shirt', 'short_pants', 'zebra', 'waffle_iron', 'bottle', 'plate', 'sock', 'soccer_ball', 'banana', 'baseball_cap', 'flower_arrangement', 'cake', 'napkin', 'fork', 'spoon', 'train_(railroad_vehicle)', 'poster', 'hat', 'beanie', 'cornet', 'tights_(clothing)', 'ski', 'glove', 'toy', 'toothbrush', 'surfboard', 'teddy_bear', 'jacket', 'umbrella', 'billboard', 'car_(automobile)', 'trousers', 'belt', 'streetlight', 'jean', 'birthday_cake', 'Christmas_tree', 'beanbag', 'pillow', 'lamppost', 'curtain', 'clock_tower', 'signboard', 'snowboard', 'shovel', 'laptop_computer', 'refrigerator', 'tray', 'bucket', 'mask', 'helmet', 'sheep', 'handbag', 'boot', 'water_bottle', 'necklace', 'jar', 'bowl', 'bread', 'paper_plate', 'motorcycle', 'baseball_bat', 'fire_engine', 'hose', 'crossbar', 'table', 'computer_keyboard', 'pastry', 'toilet', 'cellular_telephone', 'fireplace', 'cookie', 'cow', 'blanket', 'dog', 'log', 'knee_pad', 'pickup_truck', 'condiment', 'cat', 'tennis_racket', 'visor', 'tennis_ball', 'stove', 'saucepan', 'pan_(for_cooking)', 'giraffe', 'manger', 'sweater', 'wineglass', 'tote_bag', 'swimsuit', 'shoe', 'jersey', 'parking_meter', 'coat', 'horse', 'saddle_(on_an_animal)', 'bear', 'statue_(sculpture)', 'clock', 'bullet_train', 'slide', 'ski_parka', 'truck', 'trash_can', 'dress', 'skateboard', 'strainer', 'flowerpot', 'pizza', 'person', 'wine_bottle', 'bus_(vehicle)', 'wheel', 'vent', 'bun', 'tank_top_(clothing)', 'shirt', 'painting', 'vase', 'sink', 'dishwasher', 'faucet', 'wall_socket', 'bath_mat', 'banner', 'sofa', 'recliner', 'coffee_table', 'television_set', 'sweatshirt', 'soup', 'broccoli', 'bandanna', 'bed', 'bow_(decorative_ribbons)', 'fireplug', 'saucer', 'tongs', 'bicycle', 'street_sign', 'sail', 'mast', 'vest', 'stool', 'mixer_(kitchen_tool)', 'necktie', 'monitor_(computer_equipment) computer_monitor', 'polar_bear', 'carrot', 'dispenser', 'elephant', 'book', 'wristlet', 'ski_boot', 'kite', 'ski_pole', 'bird', 'mirror', 'suitcase', 'box', 'spatula', 'apple', 'pear', 'chair', 'desk', 'bulldozer', 'rat', 'brake_light', 'medicine', 'license_plate', 'cowboy_hat', 'flag', 'tablecloth']
# valid unseen
# ['cigarette', 'waffle_iron', 'cornet', 'beanbag', 'shovel', 'cookie', 'saucepan', 'manger', 'slide', 'recliner', 'soup', 'saucer', 'tongs', 'mixer_(kitchen_tool)', 'spatula', 'bulldozer', 'rat', 'medicine']

####### test
# ['zebra', 'elephant', 'boat', 'flag', 'mast', 'cow', 'choker', 'flower_arrangement', 'vase', 'place_mat', 'sofa', 'curtain', 'chandelier', 'skirt', 'chair', 'backpack', 'shoe', 'avocado', 'knife', 'cucumber', 'bathtub', 'plastic_bag', 'sink', 'box', 'surfboard', 'balloon', 'carton', 'glass_(drink_container)', 'toilet', 'cistern', 'cover', 'trousers', 'truck', 'baby_buggy', 'polo_shirt', 'short_pants', 'tennis_racket', 'tank_top_(clothing)', 'shopping_cart', 'banana', 'baseball_base', 'snowboard', 'banner', 'cellular_telephone', 'poster', 'tray', 'mug', 'table', 'pancake', 'blackberry', 'pipe', 'faucet', 'necktie', 'monitor_(computer_equipment) computer_monitor', 'mouse_(computer_equipment)', 'computer_keyboard', 'sweatshirt', 'train_(railroad_vehicle)', 'ball', 'log', 'airplane', 'saucer', 'boot', 'pizza', 'radiator', 'microwave_oven', 'orange_(fruit)', 'stop_sign', 'car_(automobile)', 'signboard', 'suitcase', 'shopping_bag', 'giraffe', 'bird', 'chopping_board', 'carrot', 'celery', 'bowl', 'ski', 'ski_pole', 'laptop_computer', 'jersey', 'baseball_glove', 'belt', 'bed', 'blanket', 'cupboard', 'oven', 'refrigerator', 'vent', 'armchair', 'loveseat', 'fireplace', 'street_sign', 'cat', 'handle', 'person', 'umbrella', 'handbag', 'sandwich', 'tomato', 'coat', 'lamppost', 'tablecloth', 'lanyard', 'teddy_bear', 'headboard', 'slipper_(footwear)', 'lamp', 'lampshade', 'horse', 'bear', 'ski_boot', 'bus_(vehicle)', 'windshield_wiper', 'wheel', 'tag', 'taillight', 'propeller', 'plow_(farm_equipment)', 'broccoli', 'jean', 'apple', 'bracelet', 'mound_(baseball)', 'dog', 'frisbee', 'duffel_bag', 'tennis_ball', 'antenna', 'skateboard', 'blinder_(for_horses)', 'book', 'strap', 'camera_lens', 'hog', 'apron', 'hat', 'pacifier', 'Lego', 'onion', 'bench', 'ski_parka', 'mirror', 'jacket', 'printer', 'wall_clock', 'telephone_pole', 'beer_bottle', 'globe', 'ladder', 'desk', 'pillow', 'basket', 'lightbulb', 'coat_hanger', 'drawer', 'ambulance', 'cone', 'pad', 'crossbar', 'goggles', 'glove', 'vest', 'license_plate', 'motorcycle', 'blinker', 'kite', 'headband', 'manger', 'pole', 'pickle', 'cup', 'traffic_light', 'dress', 'chopstick', 'bottle_cap', 'shirt', 'hinge', 'bun', 'stapler_(stapling_machine)', 'doughnut', 'statue_(sculpture)', 'fan', 'baseball_cap', 'bolt', 'fireplug', 'flagpole', 'bicycle', 'wet_suit', 'shower_curtain', 'bath_mat', 'bath_towel', 'gazelle']
# test unseen
# ['cucumber', 'baseball_base', 'pancake', 'blackberry', 'saucer', 'shopping_bag', 'celery', 'loveseat', 'slipper_(footwear)', 'plow_(farm_equipment)', 'camera_lens', 'Lego', 'beer_bottle', 'lightbulb', 'coat_hanger', 'ambulance', 'pad', 'manger', 'chopstick', 'hinge', 'stapler_(stapling_machine)', 'flagpole']